# Smoke тестування

Smoke тести мають мінімальне навантаження.
Їх запускають для перевірки, чи система працює коректно при мінімальному навантаженні, а також для збору базових значень продуктивності.

запуск тестів з невеликою кількістю віртуальних користувачів (VUs) — понад 5 VUs можна вважати міні-навантажувальним тестом.

тести повинені виконуватися протягом короткого періоду: або з невеликою кількістю ітерацій, або тривалістю від кількох секунд до кількох хвилин.

\*У деяких джерелаї Smoke тести також називають shakeout тестами.

### Коли запускати Smoke тест

Команди повинні запускати Smoke тести щоразу, коли створюється або оновлюється тестовий скрипт. Також слід виконувати Smoke тестування щоразу при оновленні відповідного коду додатка.

Запуск Smoke тесту як першого кроку є хорошою практикою, оскільки він допомагає:

- Переконатися, що ваш тестовий скрипт не містить помилок.
- Переконатися, що система не видає помилок (продуктивність або системні помилки) під мінімальним навантаженням.
- Зібрати базові показники продуктивності системи під мінімальним навантаженням.

## Основні аспекти Smoke тестування

### Кожного разу, коли створюєте або оновлюєте скрипт, запускайте Smoke тест

Оскільки Smoke тести перевіряють тестові скрипти, намагайтеся виконувати їх щоразу при створенні або оновленні скрипту. Уникайте запуску інших типів тестів із неперевіреними скриптами.

### Мінімізуйте навантаження та тривалість

Налаштуйте тестовий скрипт так, щоб він виконувався невеликою кількістю віртуальних користувачів (від 2 до 20) з невеликою кількістю ітерацій або короткою тривалістю (від 30 секунд до 3 хвилин).

---

## Smoke тестування в k6

```javascript
import http from "k6/http";
import { check, sleep } from "k6";

export const options = {
  vus: 3, // Ключовий параметр для Smoke тесту. Тримайте значення в межах 2-5 VUs
  duration: "1m", // Може бути коротшим або мати лише кілька ітерацій
};

export default () => {
  const urlRes = http.get("https://quickpizza.grafana.com");
  sleep(1);
  // ДОДАТКОВІ КРОКИ
  // Тут можна додати більше кроків або складніший скрипт
  // Крок 1
  // Крок 2
  // тощо
};
```

Цей скрипт є прикладом Smoke тесту. Ви можете скопіювати його, змінити кінцеві точки та почати тестування. Для більш складної логіки тестування зверніться до прикладів. Графік VU для Smoke тесту має виглядати приблизно так.

## Аналіз результатів

Smoke тест спочатку перевіряє, чи скрипт виконується без помилок. Якщо виникають помилки у скрипті, виправте їх перед запуском більш масштабних тестів.

Якщо ж ви помітили низьку продуктивність навіть при мінімальному навантаженні, повідомте про проблему, виправте середовище та повторно запустіть Smoke тест перед проведенням інших тестів.

Як тільки Smoke тест покаже відсутність помилок, а результати продуктивності будуть прийнятними, можна переходити до інших типів тестування.
